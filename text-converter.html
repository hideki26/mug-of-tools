<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transformador de Texto</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <iframe src="header.html" style="width:100%; border:none;"></iframe>

  <h2>Transformador de Texto</h2>
  
  <div class="container">
    <textarea id="inputText" placeholder="Pega tu texto aquí..."></textarea>
    
    <div class="button-group">
      <button id="toUpper">A MAYÚSCULAS</button>
      <button id="toLower">a minúsculas</button>
      <button id="sentenceCase">Mayúsculas después de punto</button>
      <button id="clearFormat" class="secondary">Limpiar formato</button>
      <button id="copyResult" class="copy-btn">Copiar resultado</button>
    </div>
    
    <div class="output-container">
      <h2>Resultado</h2>
      <textarea id="outputText" readonly placeholder="El texto transformado aparecerá aquí..."></textarea>
    </div>
    
    <div class="info">
      <p>
        <strong>Instrucciones:</strong> Pega tu texto en el cuadro superior, selecciona una transformación y copia el resultado.  
        La opción "Limpiar formato" elimina todo el formato excepto <strong>negritas</strong> y <em>cursivas</em>.
      </p>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const inputText = document.getElementById('inputText');
        const outputText = document.getElementById('outputText');
        const toUpperBtn = document.getElementById('toUpper');
        const toLowerBtn = document.getElementById('toLower');
        const sentenceCaseBtn = document.getElementById('sentenceCase');
        const clearFormatBtn = document.getElementById('clearFormat');
        const copyResultBtn = document.getElementById('copyResult');

      // Convertir a mayúsculas
        toUpperBtn.addEventListener('click', function() {
          outputText.value = inputText.value.toUpperCase();
        });

      // Convertir a minúsculas
        toLowerBtn.addEventListener('click', function() {
          outputText.value = inputText.value.toLowerCase();
        });

      // Mayúsculas después de punto
        sentenceCaseBtn.addEventListener('click', function() {
          let text = inputText.value.toLowerCase();
          if (text.length > 0) {
            text = text.charAt(0).toUpperCase() + text.slice(1);
          }
          text = text.replace(/\.\s+([a-z])/g, match => match.toUpperCase());
          text = text.replace(/\.\n+([a-z])/g, match => match.toUpperCase());
          outputText.value = text;
        });

      // Limpiar formato manteniendo negritas y cursivas
        clearFormatBtn.addEventListener('click', function() {
          let text = inputText.value;
        text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
          text = text.replace(/<\/?[^>]+(>|$)/g, match => {
            if (match.toLowerCase().startsWith('<strong') || 
              match.toLowerCase().startsWith('</strong') ||
              match.toLowerCase().startsWith('<em') || 
              match.toLowerCase().startsWith('</em')) {
              return match;
          }
          return '';
        });
          outputText.value = text;
        });

      // Copiar resultado al portapapeles
        copyResultBtn.addEventListener('click', function() {
          outputText.select();
          document.execCommand('copy');
          const originalText = copyResultBtn.textContent;
          copyResultBtn.textContent = '¡Copiado!';
          setTimeout(() => {
            copyResultBtn.textContent = originalText;
          }, 2000);
        });
      });
    </script>
  </body>
</html>
